The HPS Test run was proposed to DOE early in 2011 as the first stage of the HPS experiment. Its
purposes included demonstrating that the apparatus and data acquisition systems are feasible and
that the trigger rates and occupancies encountered in electron-beam running are as simulated.  It also
provided valuable experience to the HPS Collaboration in all aspects of designing, building, installing,
and running the experiment at JLab. Furthermore, in the case that HPS Test detector met all of the 
performance goals and was given dedicated running time with an electron beam, the HPS Test Run 
could provide new sensitivity to heavy photons. The HPS Test apparatus was installed on April 19, 2012, and 
ran parasitically with the HDice experiment, using a photon beam, until May 18. The JLab run schedule 
precluded any dedicated electron beam running, but the HPS Test Run was allowed a short and valuable
dedicated run with the photon beam.

This section briefly reviews the HPS Test Run apparatus, a simplified version of that 
planned for the full HPS experiment, and demonstrates the feasibility of the detector
technologies proposed for silicon tracker, ECal, and data acquisition systems. It documents the
performance of the trigger, data acquisition, silicon tracker, and ECal
and shows that the performance assumed in calculating the physics reach of the experiment is realistic.
Of particular importance, data from dedicated photon beam running has been used to compare
the observed trigger rates with that expected in simulation. The trigger rate is almost entirely due to
photons which have converted to e$^+$e$^-$ upstream of HPS and is sensitive to the multiple
Coulomb scattering of electrons and positrons in the conversion target.  Since scattered primary beam is the dominant 
source of occupancy in running HPS in an electron beam, good agreement between data and simulation 
confirm the background simulation used to benchmark the physics reach of the HPS experiment.

In addition to this important test of our background simulation, the test run accomplished the following goals which are explained below in Sec.~\ref{sec:testrun_performance}:
\begin{enumerate}
	\item More than 97\% of SVT channels functioned properly
	\item SVT readout signal to noise of 25.5
	\item SVT hit time resolution of 2.6 ns; this proves hit time reconstruction will work for HPS
	\item SVT hit efficiency greater than 98\%
	%\item SVT track reconstruction efficiency greater than 98\%
	\item Survey-based SVT alignment performs as expected and will allow track-based alignment
	\item 87\% of ECal crystals functioned properly, and defects will be corrected by planned ECal upgrades
	\item Calibrated ECal using SVT tracks
	\item Fully integrated SVT and JLab DAQ
	\item Trigger functions as designed; FADC trigger rate tested to greater than 100~kHz
	% deficiencies found in test run trigger performance are addressed for the 2014-2015 run
\end{enumerate}

\subsection{HPS Test Run Apparatus } 

In Figure \ref{fig:hpstest_layout}, the layout of the parasitic run is shown. The silicon vertex tracker was installed inside the Hall B pair spectrometer magnet vacuum chamber with the electromagnetic calorimeter mounted downstream.
Both the tracker and the ECal were retracted off the beam plane to allow clean passage of the photon beam through the system.
 
\begin{figure}[ht]
    \includegraphics[width=\textwidth]{test2012/HPS_dimensions}
\caption{\small{Layout of the HPS parasitic run.} }
\label{fig:hpstest_layout}
\end{figure}

For dedicated HPS running the photon beam was generated in the interaction of the $5.5$ GeV electrons with a gold radiator of $10^{-4}$ r.l., located $\approx 8$ meters upstream of the PS pair converter. After collimation ($D=6.4$ mm), the photon beam passes through the pair converter and through the HPS system. The converter was located $\approx 77$~cm upstream of the first layer of the silicon vertex tracker. Data were taken on different converters (empty, $1.8\times 10^{-3}$ r.l., $4.5\times 10^{-3}$ r.l., and $1.6\times 10^{-2}$ r.l.). These measurements were repeated for the reverse field setting of the pair spectrometer dipole.

\subsubsection{Test Run SVT}

The silicon tracking and vertexing detector for HPS Test, or SVT, operates in an existing vacuum chamber inside the pair spectrometer analyzing magnet in Hall B at JLab.  The design principles of the SVT are described in further detail in the HPS Test Run Proposal  \cite{HPS_tPROP}. There are five measurement stations, or ``layers,'' placed immediately downstream of the target. Each layer comprises a pair of closely-spaced planes and each plane is responsible for measuring a single coordinate, or ``view.'' Introduction of a stereo angle between the two planes of each layer provides three-dimensional tracking and vertexing throughout the acceptance of the detector with one redundant layer. 

In order to accommodate the dead zone, the SVT is built in two halves that are mirror reflections of one another about the plane of the nominal electron beam.  Each half consists of five double-sided modules mounted on a support plate that provides services to the modules and allows them to be moved as a group relative to the dead zone. Each module places a pair of silicon microstrip sensors back-to-back at a specified stereo angle with independent cooling and support.

Modules with 100 milliradian stereo are used in the first three layers to provide higher-resolution 3-d space points for vertexing. The 50 milliradian stereo of the last two layers breaks the tracking degeneracy of having five identical layers and minimizes fakes from ghost hits, improving pattern recognition while still providing sufficient pointing resolution into Layer 3 for robust hit association in the denser environment there. These stereo angles are the same as those proposed in Section \ref{sec:svt} for the new SVT. The details of the five layers are shown in Table \ref{tab:trk} and a rendering of the detector layout is shown in Figure \ref{fig:tracker_model}.  Figure \ref{fig:tracker_halves} shows a photograph of both completed detector halves prior to final assembly.  Altogether, this layout comprises 20 sensors and hybrids and 100 APV25 chips for a total of 12780 readout channels. 

\begin{table}[h]
\begin{center}
\begin{tabular}{lccccc}   
\hline \hline 
    Layer & 1 & 2 & 3 & 4 & 5 \\      
\hline
    Nominal $z$, from target (cm)  & 10 & 20 & 30 & 50 & 70  \\ 
    Stereo angle (mrad)  & 100 & 100 & 100 & 50 & 50 \\ 
    Bend plane resolution ($\mu m$)  & $\approx$60 & $\approx$60 & $\approx$60 & $\approx$120 & $\approx$120  \\ 
    Non-bend plane resolution ($\mu m$)  & $\approx$6 & $\approx$6 & $\approx$6 & $\approx$6 & $\approx$6  \\ 
    \# sensors  & 4 & 4 & 4 & 4 & 4  \\ 
    Nominal dead zone (mm)  & $\pm1.5$  & $\pm3.0$  & $\pm4.5$  & $\pm7.5$  & $\pm10.5$  \\ 
    Power consumption (W) & 6.9 & 6.9 & 6.9 & 6.9 & 6.9 \\
\hline \hline
\end{tabular}
\caption[]{Layout of the HPS Test SVT. }
\label{tab:trk} 
\end{center}
\end{table}

\begin{figure}[ht]
    \includegraphics[width=\textwidth]{test2012/HPS_nocables_nowires}
\caption{\small{A partial rendering of the HPS Test SVT solid model showing the modules of the upper and lower half-detectors on their support plates, the hinged C-support, the motion levers, the cooling manifolds on their strain relief plate and the baseplate with its adjusters.  The sensors are shown in red and the hybrids in green. The beam enters from the right.} }
\label{fig:tracker_model}
\end{figure}

\begin{figure}[ht]
    \includegraphics[width=\textwidth]{test2012/2012-101-PHOTON-DETECTOR-001.jpg}
\caption{\small{Both halves of the HPS Test SVT fully assembled at SLAC.} }
\label{fig:tracker_halves}
\end{figure}

Power is provided to each hybrid using CAEN power supplies on loan from Fermilab. Three low voltages are supplied for the APV25 and one high voltage to reverse bias the sensor. The supplies that provide sensor bias are capable of 500V operation and can be used to test operation at high voltage in close proximity to an electron beam. The total power consumption of each hybrid during normal operation is approximately 1.7 W, which is removed by the cooling system. Care was exercised in selecting power and data cables to ensure vacuum compatibility and sufficient radiation hardness. A custom junction box interfaces the CAEN power supply output channels to the SVT hybrids. Control of the supplies is provided via an EPICS graphical user interface, which allows monitoring of the detector and interlock protection.

The linear shifts that define the opening of the SVT are controlled by a pair of stepper motors located in low field regions at the ends of the analyzing magnet.  For photon running, these are locked in the open position, but for electron running they will be connected and controlled through EPICS so that the distance between the beam and the sensors can be adjusted to balance detector occupancies and acceptance.

\subsubsection{Test Run ECal}

The electromagnetic calorimeter (ECal) for HPS, as described in Section \ref{sec:ecal}, was built and tested in the test run.
The only differences between the test run ECal and what is proposed here for HPS are in the position and the vacuum chamber.
The vacuum chamber between the two ECal modules was not used for the photon test run; instead a  2'' beam pipe was used to transport photon beam from the pair spectrometer vacuum chamber to the HDIce target.  
The ECal was mounted downstream of the analyzing dipole magnet at the distance of $\sim 148$ cm from the upstream edge of the magnet. The two ECal modules were positioned just above and below the beam pipe such that the edge of the crystal closest to the beam was $3.7$ cm from it. 


%In order to maintain stable performance of the PbWO$_4$ calorimeter, the crystals and APDs are enclosed within a temperature stabilized environment, held constant to a precision of $1~^o$F. The expected energy resolution of the system from operational experience with the IC is $\sigma_E/E \sim 4.5\% / \sqrt{E (GeV)}$. As in the IC, PbWO$_4$ modules are connected to a motherboard that provides power to and transmits signals from individual APDs and pre-amplifier boards. Crystals inside the box are supported by aluminum frames as shown in Figure \ref{fig:ecal_assembly}.

For the test run, the ECal made use of the existing low and high voltage systems from the CLAS IC, as well as signal cables and splitters. Connectors on the existing signal cables were rearranged to accommodate the new layout of the channels. 
 
Assembly of the bottom half to the ECal is shown in Fig.~\ref{fig:ecal_assembly}.
\begin{figure*}[t]
\includegraphics[ scale=0.25]{test2012/ecal_assembly.jpg}
\caption{\small{Assembly of the ECal bottom module.}}\label{fig:ecal_assembly}
\end{figure*}
Figure \ref{fig:ecal_mounted} shows the ECal in its installed position for the parasitic run with photon beam.
 
\begin{figure*}[t]
\includegraphics[ scale=0.25]{test2012/ecal_mounted}
\caption{\small{ECal mounted downstream of the Hall-B pair spectrometer for the parasitic run with photon beams. Hoses for the cooling system, and the power and signal cables for beam-right side of both modules are visible.}}\label{fig:ecal_mounted}
\end{figure*}


\input{test2012/daq/daq}


\input{test2012/trigger/trigger}



\subsection{Multiple Coulomb Scattering Measurement}
\label{sec:angular_measurement}
\input{test2012/angular_measurement/angular_measurement}




\subsection{Test Run Apparatus Performance} 
\label{sec:testrun_performance}
As previously noted, all running of the HPS Test apparatus was with photon beams, using the Hall-B pair 
spectrometer (PS) pair converter as a target.  This target,  located $\sim77$~cm from the first layer 
of the tracker, produced a sufficient flux of electrons and positrons to test the principles of running the HPS experiment.
This section will report on a few selected preliminary results that demonstrate our understanding of the system. 

\subsubsection{SVT Performance}
\input{test2012/svtperformance/svtperformance}
\label{sec:svtperformance}

\input{test2012/alignment/alignment}

\input{test2012/vertexing/vertexing}



%\subsubsection{ECal \& Trigger Performance}
\input{test2012/ecalperformance/ecalperformance}
\label{sec:ecalperformance}





