%\subsubsection{SVT DAQ}



The SVT DAQ is a SLAC built data acquisition system utilizing the Advanced Telecommunication Computing Architecture (ATCA) for high speed data transfer.  It is designed to readout data continuously at 40 MHz from the silicon detector modules, and transfer data to the JLab DAQ once a trigger signal is received. It can support a trigger rate of a few 10Õs of kHz.

There are a total of 20 silicon strip sensors, each one connected to an onboard readout card called a hybrid which holds five 128-channel APV25 integrated circuits. The APV25s provide amplification, pipelining, and analog storage for trigger accepted events. There are 5 analog outputs for each 640-channel hybrid. Each hybrid will be connected via a multi-twisted-pair cable to a readout board.

 \begin{figure}[t]
\includegraphics[scale=0.9]{test2012/daq/svt_daq_diagram.png}
\caption{\small{Schematic of the SVT DAQ showing input from the hybrids mounted on the silicon detector to the RTM, its connection to the COB, and the Ethernet switch used to transfer data a 1 Gbit/sec to the DAQ PC and ultimately to the JLAB DAQ. Details are given below.}}\label{fig:svtdaq}
\end{figure}


The SVT readout system is shown in Figure \ref{fig:svtdaq}. The outputs of 12 hybrids are digitized on an ATCA (Advanced Telecommunication Computing
Architecture) RTM (Rear Transition Module) board. A pre-amplifier converts the APV25 differential current output to a different voltage output scaled to the sensitive range of a 14-bit ADC. The RTM is organized into 4 sections with each section supporting 3 hybrids (15 channels). The ADC is operated at the system clock of 41.667 Mhz. The RTM also includes a 4-channel Fiber Optic module and supporting logic which can be used to interface to the JLAB trigger supervisor card.

On the ATCA main board (also known as the Cluster On Board or COB), shown in Figure \ref{fig:svtdaqmodule}, there are 4 FPGAs each interfacing to a single section of the RTM. Each FPGA exists on a separate daughter card known as the Data Processing Module or DPM. The DPMs receive the digitized data from the RTM ADCs, apply thresholds for data reduction and organize the sample data into UDP datagrams. The DPMs also host an I2C controller used to configure and monitor the APV25 chips. One DPM in the system is configured to operate as a trigger interface module, receiving and distributing the system clock and trigger to the rest of the ATCA crate.
The ATCA crate hosts 2 COB cards, one supporting 4 data processing DPMs and the other supporting 3 data processing DPMs and one trigger DPM. A total of 21 hybrids are supported, 1 more than the 20 required. The two ATCA COB cards and their DPMS are interconnected with a 10G switch card which also hosts two external 1Gbit Ethernet interfaces to a standard PC.

 \begin{figure}[t]
\includegraphics[scale=0.9]{test2012/daq/svt_daq_module.png}
\caption{\small{The Cluster on Board (COB) board, the main board of the SVT DAQ. The RTM is plugged into the COB in the back.}}\label{fig:svtdaqmodule}
\end{figure}


The external PC supports three network interfaces, 2 standard 1G-bit Ethernet and one custom low latency data reception card. The first Ethernet interface is used for slow control and monitoring of the 8 DPM modules. The second Ethernet interface serves as the interface to the JLAB data acquisition system. The third custom low latency network interface is used to receive data from the SVT ATCA crate and supports a low latency, reliable TTL trigger acknowledge interface to the trigger DPM. This PC hosts the SVT control and monitoring software as well as the JLAB ROC (Read Out Controller) application.
